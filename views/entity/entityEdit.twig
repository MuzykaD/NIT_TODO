{% extends 'layout.twig' %}

{% block body %}

    <h3>{{ title }}</h3>

    <form action="/entity/{{ entity.id }}/update" method="post">
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="name" class="form-control" required value="{{ entity.name }}">
        </div>

        <div class="form-group">
            <label>Topic</label>
            <select name="topic" class="form-control" required>
                {% for topic in topics %}
                    <option value="{{ topic.id }}" {% if entity.topic == topic.id %}selected{% endif %}>{{ topic.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label>Color</label>
            <select id="select_color" name="color" class="form-control" onchange="$(this).css('background-color', $('#select_color option:selected').html());" required>
                {% for color in colors %}
                    <option value="{{ color.id }}" style="background-color: {{ color.name }}" {% if entity.color == color.id %}selected{% endif %}>{{ color.name }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Save</button>
    </form>

{% endblock %}

{% block javascripts %}

    {{ parent() }}

    <script>$('#select_color').css('background-color', $('#select_color option:selected').html());</script>

{% endblock %}

